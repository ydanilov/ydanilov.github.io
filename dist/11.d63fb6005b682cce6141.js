(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[11,12],{1425:function(e,t,i){"use strict";var o,s,r,a=i(352);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.Z=(n(r={},"template-common-login",(0,a.f)(o||(o=l(['\n\n\t<div class="login-popup hidden">\n\n\t\t<div class="login-popup-wrapper">\n\t\t\t<div class="login ljr-panel hidden">\n        <div class="header"><a href="/join/" class="link">Join</a> or <span>Log in</span></div>\n\t\t\t\t<form method="post" action="/api/redirect" id="login_form">\n\t\t\t\t\t<input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n\t\t\t\t\t<input name="password" autocapitalize="off" autocorrect="off" required="required" class="password-input input-template" autocomplete="on"  type="password" spellcheck="false" value=""  placeholder="Password" />\n\t\t\t\t\t<input name="url" type="hidden" value="" />\n\t\t\t\t\t<div class="go">Log in</div>\n\t\t\t\t</form>\n        <div class="social-caption">Log in with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n\t\t\t\t<a href="/recover/" class="link forgot">Forgot password?</a>\n\t\t\t\t<div class="error">Invalid email or password</div>\n\t\t\t</div>\n\n\n      <div class="join ljr-panel hidden">\n        <div class="header"><span>Join</span> or <a href="/login/" class="link">Log in</a></div>\n        <input autocapitalize="on"  autocorrect="off" required="required" class="fullname-input input-template for-validate"  maxlength="24" type="text"     spellcheck="false" value="" placeholder="Name" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="email-input input-template for-validate"     type="email"    spellcheck="false" value="" placeholder="Email" />\n        <input autocapitalize="off" autocorrect="off" required="required" class="password-input input-template for-validate"  type="password" spellcheck="false" value="" placeholder="Password" />\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="terms-checkbox for-validate" required="required">\n            <span class="checkmark"></span>\n          </label>\n          <p>I accept Readymag’s\n            <a href="https://readymag.com/readymag/terms-and-privacy/" target="_blank">Terms and Privacy Policy</a>\n          </p>\n        </div>\n\n\n        <div class="checkbox-container">\n          <label>\n            <input type="checkbox" class="subscribe-checkbox">\n            <span class="checkmark"></span>\n          </label>\n          <p>Кeep me updated on news and offers</p>\n        </div>\n\n\n        <div class="go">Join</div>\n\n        <div class="social-caption">Sign up with</div>\n        <div class="social-auth" data-provider=\'facebook\'>\n          <span class="icon"></span>\n          <span class="buttonText">Facebook</span>\n        </div>\n        <div class="social-auth" data-provider=\'google\'>\n          <span class="icon"></span>\n          <span class="buttonText">Google</span>\n        </div>\n      <div class="error"></div>\n\n      </div>\n\n        <div class="recover ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <div class="wrapper">\n                <div class="info">Please enter your email address and we\'ll send you instructions:</div>\n                <input name="username" autocapitalize="off" autocorrect="off" required="required" class="email-input input-template"  autocomplete="on" type="email" spellcheck="false" value="" placeholder="Email"/>\n                <div class="go">Submit</div>\n            </div>\n            <div class="send-message">If an account exists for this email address, you will shortly get instructions for resetting your password. If you have not received such a message, please check that you have entered the same email address you used to register your Readymag account.</div>\n            <div class="go-back">Go Back</div>\n        </div>\n\n        <div class="reset ljr-panel hidden">\n            <div class="header"><span>Reset Password</span></div>\n            <input autocapitalize="off" autocorrect="off" required="required" class="new-password-input input-template"  type="password" spellcheck="false" value="" placeholder="New Password" />\n            <input autocapitalize="off" autocorrect="off" required="required" class="verify-password-input input-template"  type="password" spellcheck="false" value="" placeholder="Verify Password" />\n            <div class="go">Save</div>\n            <div class="error"></div>\n        </div>\n\n            <div class="forbidden ljr-panel hidden">\n                <div class="header"><span>Login forbidden</span></div>\n                <div class="wrapper">\n                    <div class="info">It seems Readymag is displayed as an embedded page on the third party web site. Login is disabled due to security reasons.<br/><br/>Please <a href="https://readymag.com/login" target="_blank">login or join</a> on the original Readymag page.</div>\n                </div>\n            </div>\n\n\n            <div class="close-popup"></div>\n      <a href="/" class="link go-main"></a>\n\t\t</div>\n\t</div>\n\n'])))),n(r,"template-common-login-preloader",(0,a.f)(s||(s=l(['\n    <div class="rmpreloader button">\n        <div class="arc"></div>\n    </div>\n'])))),r)},1426:function(e,t,i){"use strict";i.r(t);var o=i(312),s=i(321),r=i(308),a=i(965),n=i(323),l=i(340),c=function(e){if(s.Z.bindAll(this),s.Z.extend(this,e),!RM.common.magCreationInProgress)if(this.analytics=this.router&&this.router.analytics,this.router?this.router==RM.viewerRouter?this.routerName="viewer":this.router==RM.collectorRouter?this.routerName="collector":this.router==RM.homepageRouter?this.routerName="homepage":this.router==RM.constructorRouter?this.routerName="constructor":this.routerName="unknown":this.routerName="error",this.analytics&&!this.noCreateRequestTracking&&this.analytics.sendEvent("Create Mag Request"),n.Z.isDesktop)if(Modernizr.msie||Modernizr.msie11)this.showIEPopupWarning();else if(this.me){var t="function"==typeof this.me.get?this.me.get("permissions"):this.me.permissions;this.skipPermissionsCheck||t&&t.can_create_mag?this.innerCreateMag():this.showCreatePopupWarning()}else this.showJoinForm();else this.showMobilePopupWarning()};c.prototype.innerCreateMag=function(){var e={};this.analytics&&this.analytics.sendEvent("Create Mag"),this.currentFolderId&&(e.folder=this.currentFolderId),this.sharedUser&&(e.user=this.sharedUser),RM.common.magCreationInProgress=!0,o.ZP.ajax({url:r.Z.readymag_auth_host+(this.templateID?"/api/magFromTemplate/"+this.templateID:"/api/mag/"),type:"POST",data:e,success:s.Z.bind((function(e){"function"==typeof this.success&&this.success(),RM.common.magCreationInProgress=!1,window.location.href=r.Z.readymag_auth_host+"/edit/"+e.num_id+"/contents/"}),this),error:s.Z.bind((function(){if("function"==typeof this.error&&this.error(),RM.common.magCreationInProgress=!1,console.log(arguments),alert("Creating project problem. Contact tech support, please: "+r.Z.SUPPORT_MAIL),this.me){var e="function"==typeof this.me.get?this.me.get("uri"):this.me.uri;e&&(window.location.href=r.Z.readymag_auth_host+"/"+e)}}),this)})},c.prototype.showCreatePopupWarning=function(){a.default&&new a.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-create"},alert_source:"create mag"}).render()},c.prototype.showMobilePopupWarning=function(){a.default&&new a.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-switch-desktop-create"},alert_source:"create mag mobile"}).render()},c.prototype.showIEPopupWarning=function(){a.default&&new a.default({$parent:(0,o.ZP)("body > .popups"),router:this.router,opts:{type:"type-browsers"}}).render()},c.prototype.showJoinForm=function(){l.default.saveJoinData(),window.location.href="".concat(r.Z.readymag_host,"/auth/join").concat(this.templateID?"?template="+this.templateID:"")},t.default=c},1424:function(e,t,i){"use strict";i.r(t);var o=i(312),s=i(336),r=i.n(s),a=i(321),n=i(1213),l=i.n(n),c=i(340),h=i(308),u=i(1425),d=i(1426),p=i(323),m=r().View.extend({events:{"click .link":"link","click .close-popup":"closePopup","input .login.ljr-panel input.password-input":"onPasswordInput","keydown .login.ljr-panel input":"loginInputKey","click .login.ljr-panel .go":"tryLogin","submit .login.ljr-panel #login_form":"onLoginFormSubmit","click .login.ljr-panel .social-auth":"socialAuth","input .join.ljr-panel input.password-input":"onPasswordInput","keydown .join.ljr-panel input":"joinInputKey","click .join.ljr-panel .go":"createAccount","click .join.ljr-panel .social-auth":"socialAuth","click .join.ljr-panel label .checkmark":"changeCheckboxState","keyup .join.ljr-panel input.for-validate":"validateForm","click .recover.ljr-panel .go":"sendRecoverRequest","click .recover.ljr-panel .go-back":"backFromRecover","input .reset.ljr-panel input":"onPasswordInput","click .reset.ljr-panel .go":"resetPassword","click .login-popup-wrapper":"closeOutsideClick",touchstart:"onTouchStart",touchmove:"onTouchMove"},ERROR_MESSAGES:{invalid_email:"Not a valid email",min:"At least 8 characters long",letters:"Password must include letters",oneOf:"The same as email",password_dont_match:"Passwords don't match"},defaultErrorMessageHTML:'An error has occured. Please contact our support: <a href="mailto:'.concat(h.Z.SUPPORT_MAIL,'">').concat(h.Z.SUPPORT_MAIL,"</a>."),initialize:function(e){a.Z.bindAll(this),a.Z.extend(this,e),a.Z.extend(this.ERROR_MESSAGES,this.errorMessages),this.template=u.Z["template-common-login"],this.template_button_preloader=u.Z["template-common-login-preloader"],this.logged=!1,this.animationSpeed=0,this.disableAnimations||a.Z.delay(a.Z.bind((function(){this.animationSpeed=300}),this),100),this.enableCors(),(0,o.ZP)(window).on("message",this.processLoginMessages)},render:function(){this.setElement(this.$node||(0,o.ZP)(this.template({})).appendTo(this.$container)),this.disableScrollWatcher=!!this.$node,this.setElement(this.$el),this.rendered=!0,this.$nameInput=this.$(".join.ljr-panel .fullname-input"),this.$emailInput=this.$(".join.ljr-panel .email-input"),this.$pswInput=this.$(".join.ljr-panel .password-input"),this.$termsCheckbox=this.$(".join.ljr-panel .terms-checkbox"),this.$joinButton=this.$(".join.ljr-panel .go");var e=c.default.queryUrlGetParam("email");e&&this.$(".email-input").val(e)},showError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultErrorMessageHTML;this.$(".join.ljr-panel .error").html(e)},clearErrors:function(){this.$(".join.ljr-panel .error").html("")},link:function(e){if(e.stopPropagation(),2!==e.which&&!e.metaKey&&!e.ctrlKey){var t=(0,o.ZP)(e.currentTarget).attr("href");if(!t)return!1;if(!this.useNavigate)return/login/i.test(t)&&this.switchTo("login"),/join/i.test(t)&&this.switchTo("join"),/recover/i.test(t)&&this.switchTo("recover"),!1;this.router.navigate(t,{trigger:!0}),e.preventDefault()}},closePopup:function(){(0,o.ZP)("#homepage-main-project__root-link")&&(0,o.ZP)("#homepage-main-project__root-link")[0]&&(0,o.ZP)("#homepage-main-project__root-link")[0].click()},changeCheckboxState:function(e){var t=(0,o.ZP)(e.target).siblings("input[type='checkbox']");t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0),(0,o.ZP)(e.target).toggleClass("checked"),(0,o.ZP)(e.target).parent().siblings("p").toggleClass("checked"),this.validateForm(),e.preventDefault()},validateForm:function(){""!==this.$nameInput.val()&&this.$pswInput.is(":valid")&&this.$emailInput.is(":valid")&&this.$termsCheckbox.is(":checked")?this.$joinButton.addClass("active"):this.$joinButton.removeClass("active")},closeOutsideClick:function(e){p.Z.isDesktop&&(0,o.ZP)(e.target).hasClass("login-popup-wrapper")&&this.closePopup()},show:function(e){this.shown||((0,o.ZP)("body").addClass("disable-scroll"),this.urlToBack=e,0===this.animationSpeed&&this.$el.flashClass("no-animation",15),this.$el.removeClass("hidden"),this.trigger("shown"),this.shown=!0,(0,o.ZP)("body").on("keyup",this.onBodyKeyUp),this.onResize())},hide:function(e){this.shown&&(this.$el.addClass("hidden"),a.Z.delay((function(){(0,o.ZP)("body").removeClass("disable-scroll")}),this.animationSpeed),this.trigger("hidden",e),this.shown=!1,(0,o.ZP)("body").off("keyup",this.onBodyKeyUp),this.onResize())},onBodyKeyUp:function(e){27===e.keyCode&&this.closePopup()},switchTo:function(e){var t=this.$(".ljr-panel."+e),i=window.matchMedia("(max-width: 768px)").matches,o=t.siblings(".ljr-panel"),s=("recover"===e||"login"===e)&&".dop-container-join"===this.$el.selector&&i;"recover"===e&&this.$(".recover.ljr-panel .email-input").val(this.$(".login.ljr-panel .email-input").val()),t.removeClass("hidden"),p.Z.isDesktop&&setTimeout((function(){t.find("input").eq(0).focus()}),0),this.disableAnimations?(o.addClass("hidden"),s&&RM.viewerRouter.mag.onResize()):a.Z.delay((function(){o.addClass("hidden"),s&&RM.viewerRouter.mag.onResize()}),this.animationSpeed/4),this.onResize()},onResize:function(){(0,o.ZP)(window).width()<=768&&this.$(".login").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",652),(0,o.ZP)(window).width()<=768&&this.$(".join").hasClass("hidden")&&this.$(".login-popup-wrapper").css("height",466)},showButtonPreloader:function(e){var t,i,s,r=e.width(),a=e.height();t=(0,o.ZP)(this.template_button_preloader()),e.append(t),e.css({color:"transparent","background-image":"none"}),e.addClass("processing"),i=t.width(),s=t.height(),t.css({left:Math.floor((r-i)/2),top:Math.floor((a-s)/2)})},hideButtonPreloader:function(e){e.find(".rmpreloader").remove(),e.css({color:"","background-image":""}),e.removeClass("processing")},loginInputKey:function(e){13===e.keyCode&&this.tryLogin()},tryLogin:function(){var e=this,t=o.ZP.trim(this.$(".login.ljr-panel .email-input").val()),i=this.$(".login.ljr-panel .password-input").val(),s=this.$(".login.ljr-panel .go"),r=c.default.queryUrlGetParam("redirect");s.hasClass("processing")||""!==t&&""!==i&&(this.showButtonPreloader(s),this.requestLogin(t,i,(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please check that you have entered your login and password correctly.";if(t&&t.redirect)return window.location.href=t.redirect;if(t){if(r)return window.location.href=h.Z.readymag_auth_host+r;if(e.logged=!0,c.default.saveJoinData("native"),e.createMagParams)return e.redirectAfterJoin(t.uri);var o=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),e.$('.login.ljr-panel #login_form input[name="url"]').val(h.Z.readymag_auth_host+(o||"/"+t.uri)),e.$(".login.ljr-panel #login_form").submit()}else e.hideButtonPreloader(s),clearTimeout(e.wrongTimeout),e.$(".login.ljr-panel").addClass("wrong-login"),e.$(".login.ljr-panel .error").html(i),e.wrongTimeout=setTimeout(a.Z.bind((function(){this.$(".login.ljr-panel").removeClass("wrong-login")}),e),3500),e.isdesktop||e.$el.scrollTop(9999)})))},requestLogin:function(e,t,i){var s,r=this,a={pass:l()(t)};return a[e.match(/@/)?"email":"uri"]=e,this.clearErrors(),s=h.Z.readymag_auth_host+"/api/user/?timestamp="+(new Date).getTime(),o.ZP.post(s,a,(function(e){i&&i(e)})).error((function(e){i&&i(null,404===e.status?void 0:r.defaultErrorMessageHTML)})),!1},onLoginFormSubmit:function(){return this.logged},showErrors:function(e){clearTimeout(this.wrongTimeout),this.$(".join.ljr-panel").addClass("wrong-join"),this.showError(Array.isArray(e)?e.join(" <br/>"):e),this.wrongTimeout=setTimeout(a.Z.bind((function(){this.$(".join.ljr-panel").removeClass("wrong-join")}),this),2e3)},redirectHandler:function(e,t,i){if(e)return window.location.href=e,!0;this.redirectAfterJoin(t.uri,i)},createAccount:function(){var e=this;if(!this.$(".join.ljr-panel input").hasClass("err")&&this.$joinButton.hasClass("active")){var t,i,s,r,n={email:this.$emailInput.val(),name:o.ZP.trim(this.$(".join.ljr-panel .fullname-input").val()),pass:this.$pswInput.val(),page:window.location.pathname,subscribe:this.$(".join.ljr-panel .subscribe-checkbox").is(":checked")},u=this.$joinButton,d=c.default.queryUrlGetParam("redirect");if(this.clearErrors(),!u.hasClass("processing")&&""!==n.name&&""!==n.email&&""!==n.pass){c.default.isValidEmail(n.email)||(t=!0,s=n.email,this.$emailInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES.invalid_email));var p=this.getPasswordErrors(n.pass,[n.email]);if(p.length&&(i=!0,r=n.pass,this.$pswInput.prop("type","text").addClass("err").val(this.ERROR_MESSAGES[p[0]])),(t||i)&&(clearTimeout(this.showErrorTimeout),this.showErrorTimeout=setTimeout(a.Z.bind((function(){t&&this.$emailInput.removeClass("err").prop("type","email").val(s),i&&this.$pswInput.removeClass("err").prop("type","password").val(r)}),this),3e3)),!t&&!i){this.showButtonPreloader(u),this.router.analytics.sendEvent("Join","General"),n.pass=l()(n.pass);var m=h.Z.readymag_auth_host+"/api/register";o.ZP.ajax({type:"POST",data:n,url:m,success:function(t){c.default.saveJoinData("native"),e.redirectHandler(d,t,u)},error:function(t){var i;e.hideButtonPreloader(u),403===t.status?i="User with email ".concat(n.email," already exists. Forgot your password?"):406===t.status&&(i="Name must not contain links."),e.showError(i)}})}}}},joinInputKey:function(e){13===e.keyCode&&this.createAccount()},sendRecoverRequest:function(){var e=this.$(".recover.ljr-panel .email-input").val(),t=this.$(".recover.ljr-panel .go");t.hasClass("processing")||c.default.isValidEmail(e)&&(this.showButtonPreloader(t),this.requestRecover(e,a.Z.bind((function(){this.hideButtonPreloader(t),this.$(".recover.ljr-panel").addClass("request-sended")}),this)))},requestRecover:function(e,t){var i;this.clearErrors(),i=h.Z.readymag_auth_host+"/api/recoverypass",o.ZP.post(i,{email:e},t).error((function(e){404===e.status?t&&t():this.showError()}))},backFromRecover:function(){this.useNavigate?this.router.navigate("login/",{trigger:!0}):this.switchTo("login")},resetPassword:function(){var e=this,t=o.ZP.trim(this.$(".reset.ljr-panel .new-password-input").val()),i=o.ZP.trim(this.$(".reset.ljr-panel .verify-password-input").val()),s=window.ServerData.recover,r=[],n=this.$(".reset.ljr-panel .go");if(!n.hasClass("processing")&&""!==t&&""!==i){if(t!==i&&r.push(this.ERROR_MESSAGES.password_dont_match),this.getPasswordErrors(t).forEach((function(t){return r.push(e.ERROR_MESSAGES[t])})),r.length)return clearTimeout(this.wrongTimeout),this.$(".reset.ljr-panel").addClass("wrong-reset"),this.$(".reset.ljr-panel .error").html(r.join(" <br/>")),void(this.wrongTimeout=setTimeout(a.Z.bind((function(){this.$(".reset.ljr-panel").removeClass("wrong-reset")}),this),2e3));s&&s.recover_code&&s.email&&(this.showButtonPreloader(n),o.ZP.ajax({type:"POST",data:{email:s.email,pass:l()(t),code:s.recover_code},url:h.Z.readymag_auth_host+"/api/changepass",success:function(){window.location.href="/auth/login/"},error:a.Z.bind((function(){this.hideButtonPreloader(n),this.showError()}),this)}))}},onPasswordInput:function(e){var t=(0,o.ZP)(e.currentTarget);c.default.filterNonAscii(t)&&(t.addClass("error-input"),a.Z.defer(a.Z.bind((function(){t.removeClass("error-input")}),this)))},socialAuth:function(e){var t=this;this.$button=(0,o.ZP)(e.currentTarget);var i=this.$button.attr("data-provider"),s=h.Z.readymag_auth_host+"/api/auth/"+i;if(!this.$button.hasClass("processing")){this.showButtonPreloader(this.$button),this.$button.closest(".join.ljr-panel").length&&this.router.analytics&&this.router.analytics.sendEvent("Join","General ".concat(i));var r=screen.width,a=screen.height,n=Math.min(1e3,r),l=Math.min(700,a-40),c=Math.ceil((r-n)/2),u=Math.ceil((a-l)/2);this.socialAuthWindow=window.open(s,"_blank",["toolbar=no","location="+(window.opera?"no":"yes"),"directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no","width="+n,"height="+l,"top="+u,"left="+c].join()),this.authInProgress=!0,this.popupCheckInterval=setInterval((function(){t.socialAuthWindow&&!t.socialAuthWindow.closed||(t.authInProgress=!1,clearInterval(t.popupCheckInterval),t.hideButtonPreloader(t.$button))}),100)}},handleSocialAuthResult:function(e){var t,i=this;if(this.authInProgress=!1,!e||e.error||!e.user||!e.user.uri)return this.hideButtonPreloader(this.$button),e.error&&(this.$el.scrollTop(this.$el[0].scrollHeight-this.$el.outerHeight()),this.showErrors(["Something went wrong"]),clearTimeout(this.showSocialErrorTimeout),this.showSocialErrorTimeout=setTimeout((function(){i.clearErrors()}),4e3)),void(e.user&&e.user.name&&(this.switchTo("join"),this.$(".join.ljr-panel .fullname-input").val(e.user.name),this.$(".join.ljr-panel .email-input").focus()));if(e.user.createdViaFacebook&&(t="facebook"),e.user.createdViaGoogle&&(t="google"),t)c.default.saveJoinData(t),this.redirectAfterJoin(e.user.uri,this.$button);else{var o=c.default.queryUrlGetParam("redirect");if(o)return window.location.href=h.Z.readymag_auth_host+o;window.location.href=h.Z.readymag_auth_host+"/"+e.user.uri}},processLoginMessages:function(e){if(this.authInProgress){var t=e.originalEvent||{};if(t.origin===h.Z.readymag_auth_host){var i=JSON.parse(decodeURIComponent(t.data));i&&"social-auth"===i.event&&(clearInterval(this.popupCheckInterval),this.socialAuthWindow&&this.socialAuthWindow.close(),this.handleSocialAuthResult(i.message))}}},redirectAfterJoin:function(e){var t=a.Z.isFunction(this.joinCallback)?500:0;a.Z.isFunction(this.joinCallback)&&this.joinCallback();var i=c.default.queryUrlGetParam("redirect");if(i)return window.location.href=h.Z.readymag_auth_host+i;setTimeout(a.Z.bind((function(){var t=h.Z.readymag_auth_host+"/"+e+"/";if(!p.Z.isDesktop||Modernizr.msie||Modernizr.msie11)window.location.href=t;else{var i=Modernizr.sessionstorage&&window.sessionStorage.getItem("rm.loginReturnUrl",window.location.pathname);if(Modernizr.sessionstorage&&window.sessionStorage.removeItem("rm.loginReturnUrl"),i)return window.location.href=h.Z.readymag_auth_host+i;var o=this.createMagParams,s=o&&o.templateID,r=o&&o.tp?o.tp+"-join-form":"join-form";new d.default({router:this.router,me:{permissions:{can_create_mag:!0},uri:e},tp:r,templateID:s,noCreateRequestTracking:o&&o.noCreateRequestTracking,error:a.Z.bind((function(){this.hideButtonPreloader(this.$button)}),this)})}}),this),t)},enableCors:function(){o.ZP.ajaxPrefilter((function(e){-1!==e.url.indexOf(h.Z.readymag_auth_host)&&(e.xhrFields={withCredentials:!0})}))},onTouchStart:function(e){this.disableScrollWatcher||(this.scrollY=e.originalEvent.touches.item(0).clientY)},onTouchMove:function(e){if(!this.disableScrollWatcher){var t=(0,o.ZP)(e.currentTarget),i=this.scrollY-e.originalEvent.touches.item(0).clientY;(i<0&&t.scrollTop()<=0||i>0&&t.scrollTop()+t.height()>=t[0].scrollHeight)&&e.preventDefault(),this.scrollY=e.originalEvent.touches.item(0).clientY}},destroy:function(){this.hide(),(0,o.ZP)(window).off("message",this.processLoginMessages),setTimeout(a.Z.bind((function(){this.$el.remove()}),this),400)},getPasswordErrors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return e.length<8&&i.push("min"),t.includes(e)&&i.push("oneOf"),/[a-zA-Z]+/.test(e)||i.push("letters"),i}});t.default=m}}]);